<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <script type="text/javascript" src="/socket.io/socket.io.js"></script>
    <script type="text/javascript" src="vendor/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="vendor/jquery-ui-1.10.2.custom.min.js"></script>
    <script type="text/javascript" src="vendor/knockout-2.2.1.js"></script>
    <script type="text/javascript" src="bundle.js"></script>
    <title>Chat</title>
    <style>
      body {
        font-family: Verdana, Geneva, sans-serif;
        color: #404040;
      }
      #chat-client .error {
        font-style: italic;
        color: #a04040;
      }
      #chat-client {
        width: 50em;
      }
      #chat-box .notice {
        font-style: italic;
        color: gray;
      }
      #chat-box, #chat-input, #chat-identity-list-container {
        border-style: solid;
        border-width: 0.1em;
        border-color: gray;
      }
      #chat-box {
        padding: 0.25em;
        width: 39.4em;
        height: 20em;
        overflow-y:scroll;
        vertical-align: bottom;
      }
      #chat-identity {
        padding-bottom: 0.25em;
        padding-right: 0.25em;
        text-align: right;
      }
      #chat-box {
        position: relative;
        float:left;
      }
      #chat-identity-list-container {
        padding: 0.25em;
        width: 9.26em;
        height: 20em;
        overflow-y: auto;
        overflow-x: hidden;
        float: right;
      }
      #chat-identity-list {
        padding: 0;
        overflow-x: hidden;
        width: 100%;
      }
      #chat-identity-list .identity {
        text-align: right;
      }
      #chat-input-box {
        width: 49.43em;
        clear: both;
      }
      #chat-input {
        margin-top: 0.13em;
        padding: 0.25em;
        width: 100%;
      }
    </style>
  </head>
  <body>
    <h1>Chat</h1>
    <div id='chat-client'>
      <div id='chat-identity' data-bind='text: identity'></div>
      <div id='chat-box' data-bind='foreach: {data: messages, afterAdd: highlightEffect}'>
        <div class='notice' data-bind='if: action == "welcome"'>
          You have connected as <span class='identity' data-bind='text: data'></span>.
          Use the /nick command to rename.
        </div>

        <div class='notice' data-bind='if: action == "connect"'>
          <span class='identity' data-bind='text: sender'></span> has connected.
        </div>

        <div class='notice' data-bind='if: action == "disconnect"'>
          <span class='identity' data-bind='text: sender'></span> has disconnected.
        </div>

        <div class='notice' data-bind='if: action == "identify"'>
          <span class='identity' data-bind='text: sender'></span> now identifies as <span class='identity' data-bind='text: data'></span>.
        </div>

        <div class='message' data-bind='if: action == "say"'>
          <span class='identity' data-bind='text: sender'></span>: <span class='text' data-bind='text: data'></span>
        </div>

        <div class='error' data-bind='text: data, if: action == "error"'></div>
      </div>
      <div id='chat-identity-list-container'>
        <div id='chat-identity-list' data-bind='foreach: members'>
          <div class='identity' data-bind='text: $data'></div>
        </div>
      </div>
      <div id='chat-input-box'>
        <input id='chat-input' type='text' data-bind='event: {keyup: inputHistoryKeys}, value: input, hasfocus: isInputSelected' />
      </div>
    </div>
  </body>
</html>
